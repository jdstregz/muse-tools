<html>
    <head>
        <title>Muse Tools - Playlists</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <style type="text/css">
        #login, #loggedin {
            display: none;
        }
        .text-overflow {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            width: 500px;
        }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="loggedin">
                <h1>Playlists:</h1>
                <div class="card-columns">
                    <div class="card text-white bg-dark mb-3 d-inline-block">
                        <div class="card-body">
                            <h4 class="card-title">Recently Added</h4>
                            <p class="card-text">
                                Have a lot of large playlists? It's easy to lose track of all of the new songs you've added to them. 
                                Automatically add them all to a recently added playlist. 
                            </p>
                            <button id="recently-added" class="btn btn-primary">Create</a>
                        </div>
                    </div>
                    <div class="card text-white bg-dark mb-3 d-inline-block">
                        <div class="card-body">
                            <h4 class="card-title">Playlist Mutator</h4>
                            <p class="card-text">
                                Take an existing playlist or two and mutate them by funky metrics. A playlist of only B minor tracks from the 80s with danceability ratings above 70? Say less.
                            </p>
                            <button id="playlist-mutator" class="btn btn-primary">Get Funky</a>
                        </div>
                    </div>
                    <div class="card text-white bg-dark mb-3 d-inline-block">
                        <div class="card-body">
                            <h4 class="card-title">Sentence Playlist</h4>
                            <p class="card-text">
                                Write out a sentence and hit go. You'll get a playlist that writes out your sentence word for word. Great for a good laugh or a cryptic message!
                            </p>
                            <button id="sentence-playlist" class="btn btn-primary">Sentences Rule!</a>
                        </div>
                    </div>
                    <div class="card text-white bg-dark mb-3 d-inline-block">
                        <div class="card-body">
                            <h4 class="card-title">Import</h4>
                            <p class="card-text">
                                Got the list but don't want to do it yourself? Toss the sucker our way, we'll import it for you.
                            </p>
                            <button id="import-playlist" class="btn btn-primary">I'm Lazy!</a>
                        </div>
                    </div>
                    <div class="card text-white bg-dark mb-3 d-inline-block">
                        <div class="card-body">
                            <h4 class="card-title">Seed Recommender</h4>
                            <p class="card-text">
                                Now we're talkin. Create your own playlist of recommendations taken from your own seed values. Tunable track attributes, seed tracks, artists, and genres for recommend starting points. This will get interesting.
                            </p>
                            <button id="seed-recommends" class="btn btn-primary">Seeds are chill</a>
                        </div>
                    </div>
                </div>
            </div>
            

        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.2/handlebars.min.js"></script>
        <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
        <script>
                (function() {
          
                  /**
                   * Obtains parameters from the hash of the URL
                   * @return Object
                   */
                  function getHashParams() {
                    var hashParams = {};
                    var e, r = /([^&;=]+)=?([^&;]*)/g,
                        q = window.location.hash.substring(1);
                    while ( e = r.exec(q)) {
                       hashParams[e[1]] = decodeURIComponent(e[2]);
                    }
                    return hashParams;
                  }
          
                  var params = getHashParams();
          
                  var access_token = params.access_token,
                      refresh_token = params.refresh_token,
                      error = params.error;
          
                  if (error) {
                    alert('There was an error during the authentication');
                  } else {
                    if (access_token) {        
                      $.ajax({
                          url: 'https://api.spotify.com/v1/me',
                          headers: {
                            'Authorization': 'Bearer ' + access_token
                          },
                          success: function(response) {
                            $('#login').hide();
                            $('#loggedin').show();
                          }
                      });
                    } else {
                        // render initial screen
                        $('#login').show();
                        $('#loggedin').hide();
                    }
                  }



                })();
              </script>
    </body>
</html>